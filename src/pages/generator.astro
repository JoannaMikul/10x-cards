---
import Layout from "../layouts/Layout.astro";
import { GeneratorPage } from "../components/generator/GeneratorPage";

const BASE_MODELS = [
  { label: "Gemini 2.5 Flash", value: "google/gemini-2.5-flash" },
  { label: "DeepSeek V3.2", value: "deepseek/deepseek-v3.2" },
  { label: "Claude Opus 4.5", value: "anthropic/claude-opus-4.5" },
  { label: "Claude 4.5 Sonnet", value: "anthropic/claude-sonnet-4.5" },
  { label: "Grok Fast 4.1", value: "x-ai/grok-4.1-fast" },
  { label: "GPT 4.1 Mini", value: "openai/gpt-4.1-mini" },
];

const AVAILABLE_MODELS = (() => {
  const defaultModel = process.env.OPENROUTER_DEFAULT_MODEL || import.meta.env.OPENROUTER_DEFAULT_MODEL;
  if (!defaultModel) return BASE_MODELS;

  const existingModel = BASE_MODELS.find((model) => model.value === defaultModel);
  if (existingModel) return BASE_MODELS;

  return [{ label: `${defaultModel} (Default)`, value: defaultModel }, ...BASE_MODELS];
})();

const defaultModel =
  process.env.OPENROUTER_DEFAULT_MODEL || import.meta.env.OPENROUTER_DEFAULT_MODEL || AVAILABLE_MODELS[0].value;
---

<Layout title="Generator AI - 10x-cards">
  <main class="min-h-[calc(100vh-3rem)] bg-background pr-6 pl-6">
    <div class="max-w-4xl mx-auto">
      <GeneratorPage client:load availableModels={AVAILABLE_MODELS} {defaultModel} />
    </div>
  </main>
</Layout>
